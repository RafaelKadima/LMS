# ===========================================
# Universidade MotoChefe - Variáveis de Ambiente
# ===========================================
# Copie este arquivo para .env e configure os valores

# ===========================================
# Ambiente
# ===========================================
NODE_ENV=development
APP_URL=http://localhost:3000
API_URL=http://localhost:4000

# ===========================================
# PostgreSQL
# ===========================================
POSTGRES_USER=motochefe
POSTGRES_PASSWORD=motochefe123
POSTGRES_DB=universidade
DATABASE_URL=postgresql://motochefe:motochefe123@localhost:5432/universidade?schema=public

# ===========================================
# Redis
# ===========================================
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379

# ===========================================
# MongoDB (Learning Locker)
# ===========================================
MONGO_USER=motochefe
MONGO_PASSWORD=motochefe123
MONGO_URL=mongodb://motochefe:motochefe123@localhost:27017/learninglocker?authSource=admin

# ===========================================
# Keycloak (OIDC)
# ===========================================
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin123

# Configuração do client OIDC
KEYCLOAK_ISSUER=http://localhost:8080/realms/motochefe
KEYCLOAK_JWKS_URL=http://localhost:8080/realms/motochefe/protocol/openid-connect/certs
KEYCLOAK_CLIENT_ID=web-portal
KEYCLOAK_CLIENT_SECRET=  # Deixe vazio para client público com PKCE
KEYCLOAK_API_CLIENT_ID=api-backend
KEYCLOAK_API_CLIENT_SECRET=super-secret-api-key

# NextAuth.js
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=sua-chave-secreta-de-32-caracteres-ou-mais

# ===========================================
# Cloudflare R2 (Storage)
# ===========================================
# Em desenvolvimento, use MinIO local (S3 compatible)
R2_ENDPOINT=http://localhost:9000
R2_BUCKET=motochefe-videos
R2_ACCESS_KEY=minioadmin
R2_SECRET_KEY=minioadmin123
R2_PUBLIC_URL=http://localhost:9000/motochefe-videos

# Em produção, use Cloudflare R2:
# R2_ENDPOINT=https://<ACCOUNT_ID>.r2.cloudflarestorage.com
# R2_BUCKET=motochefe-videos
# R2_ACCESS_KEY=<ACCESS_KEY>
# R2_SECRET_KEY=<SECRET_KEY>
# R2_PUBLIC_URL=https://cdn.motochefe.com.br

# ===========================================
# Learning Locker (LRS xAPI)
# ===========================================
LRS_ENDPOINT=http://localhost:8081/data/xAPI
LRS_BASIC_AUTH=base64_encoded_credentials
# Formato do LRS_BASIC_AUTH: base64(key:secret)
# Ex: echo -n "minha-key:minha-secret" | base64

# ===========================================
# Metabase (BI)
# ===========================================
METABASE_URL=http://localhost:3001
METABASE_SECRET_KEY=sua-chave-secreta-metabase

# ===========================================
# Email (SMTP)
# ===========================================
# Em desenvolvimento, use MailHog
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@motochefe.com.br

# Em produção:
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASSWORD=SG.xxxxx

# ===========================================
# JWT / Auth
# ===========================================
JWT_ACCESS_SECRET=seu-jwt-access-secret-muito-seguro
JWT_REFRESH_SECRET=seu-jwt-refresh-secret-muito-seguro
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ===========================================
# Rate Limiting
# ===========================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ===========================================
# FFmpeg / Video Processing
# ===========================================
FFMPEG_PATH=/usr/bin/ffmpeg
FFPROBE_PATH=/usr/bin/ffprobe
VIDEO_PROCESSING_CONCURRENCY=2
VIDEO_MAX_SIZE_MB=500

# ===========================================
# Sentry (Error Tracking) - Opcional
# ===========================================
# SENTRY_DSN=https://xxx@sentry.io/xxx
# SENTRY_ENVIRONMENT=development

# ===========================================
# Feature Flags
# ===========================================
FEATURE_GAMIFICATION=true
FEATURE_CERTIFICATES=false
FEATURE_LIVE_SESSIONS=false
