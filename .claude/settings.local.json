{
  "permissions": {
    "allow": [
      "Bash(chmod:*)",
      "Bash(npm install:*)",
      "Bash(pnpm install:*)",
      "Bash(ls:*)",
      "Bash(docker compose up:*)",
      "Bash(docker compose:*)",
      "Bash(ss:*)",
      "Bash(docker ps:*)",
      "Bash(pnpm prisma generate:*)",
      "Bash(pnpm prisma migrate dev:*)",
      "Bash(ln:*)",
      "Bash(docker exec:*)",
      "Bash(pnpm prisma db push:*)",
      "Bash(PGPASSWORD=motochefe123 psql:*)",
      "Bash(pnpm prisma db seed:*)",
      "Bash(pnpm dev:*)",
      "Bash(docker stop:*)",
      "Bash(docker rm:*)",
      "Bash(pnpm add:*)",
      "Bash(npx prisma migrate:*)",
      "Bash(npx prisma:*)",
      "Bash(curl:*)",
      "Bash(pnpm build:api:*)",
      "Bash(pnpm build:*)",
      "Bash(lsof:*)",
      "Bash(docker start:*)",
      "Bash(docker run:*)",
      "Bash(pkill:*)",
      "Bash(xargs kill -9 lsof -ti:3001)",
      "Bash(xargs kill -9 sleep 2 pnpm dev)",
      "Bash(npx tsc:*)",
      "Bash(echo:*)",
      "Bash(gs:*)",
      "Bash(brew install:*)",
      "Bash(docker-compose up:*)",
      "Bash(xargs kill -9)",
      "Bash(pnpm docker:up:*)",
      "Bash(sudo kill:*)",
      "Bash(kill:*)",
      "Bash(ps:*)",
      "Bash(git init:*)",
      "Bash(git remote add:*)",
      "Bash(git branch:*)",
      "Bash(git push:*)",
      "Bash(gh auth:*)",
      "Bash(sshpass -p 'Motochefe2025@' ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"echo ''Conexão OK'' && uname -a && cat /etc/os-release | head -3\")",
      "Bash(sshpass -p \"Motochefe2025@\" ssh -o StrictHostKeyChecking=no -o PreferredAuthentications=password -o PubkeyAuthentication=no root@93.127.211.241 \"echo OK\")",
      "Bash(sshpass -p \"Motochefe2025@\" ssh -o StrictHostKeyChecking=no -o PreferredAuthentications=password -o PubkeyAuthentication=no root@93.127.211.241 \"cat /etc/os-release | head -3 && free -h && df -h / && docker --version 2>/dev/null || echo ''Docker não instalado''\")",
      "Bash(sshpass -p \"Motochefe2025@\" ssh -o StrictHostKeyChecking=no -o PreferredAuthentications=password -o PubkeyAuthentication=no root@93.127.211.241 \"docker-compose --version 2>/dev/null || docker compose version 2>/dev/null || echo ''Docker Compose não instalado''\")",
      "Bash(sshpass -p \"Motochefe2025@\" ssh -o StrictHostKeyChecking=no -o PreferredAuthentications=password -o PubkeyAuthentication=no root@93.127.211.241 \"node --version 2>/dev/null || echo ''Node não instalado'' && pnpm --version 2>/dev/null || echo ''pnpm não instalado'' && nginx -v 2>&1 || echo ''Nginx não instalado''\")",
      "Bash(sshpass:*)",
      "Bash(ssh root@93.127.211.241 \"cd /var/www/lms/apps/api && npx prisma generate\")",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(ssh:*)",
      "Bash(xargs basename:*)",
      "Bash(pnpm run build:*)",
      "Bash(export SSHPASS='Motochefe2025@')",
      "Bash(git --version:*)",
      "Bash(/Users/rafaelxavier/.local/bin/claude:*)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(for skill in algorithmic-art brand-guidelines canvas-design doc-coauthoring docx frontend-design internal-comms mcp-builder pdf pptx skill-creator slack-gif-creator theme-factory web-artifacts-builder webapp-testing xlsx)",
      "Bash(do ln -sf \"/Users/rafaelxavier/.claude/plugins/marketplaces/anthropic-agent-skills/skills/$skill\" \"$skill\")",
      "Bash(done)",
      "Bash(cat:*)",
      "Bash(wc:*)",
      "Bash(pnpm --filter @motochefe/api dev:*)",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"pm2 logs lms-web --lines 20 --nostream 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"curl -s http://localhost:4001/api/settings 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"ls -la /var/www/lms/apps/web/public/uploads/settings/ 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"curl -s -o /dev/null -w ''%{http_code}'' http://localhost:3001/uploads/settings/15a139a7-2b3b-4a82-af10-0f18407b16f2.mp4 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"curl -s -X POST http://localhost:4001/api/auth/login -H ''Content-Type: application/json'' -d ''{\"\"email\"\":\"\"admin@motochefe.com.br\"\",\"\"password\"\":\"\"admin123\"\"}'' 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"docker exec motochefe-postgres psql -U motochefe -d universidade -c \"\"SELECT email, name, role FROM \\\\\"\"User\\\\\"\" LIMIT 5;\"\" 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"docker exec motochefe-postgres psql -U motochefe -d universidade -c \"\"\\\\dt\"\" 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"docker exec motochefe-postgres psql -U motochefe -d universidade -c \"\"SELECT email, name, role FROM users LIMIT 5;\"\" 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"cd /var/www/lms && node -e \"\"\nconst bcrypt = require\\(''bcryptjs''\\);\nconst hash = bcrypt.hashSync\\(''admin123'', 10\\);\nconsole.log\\(hash\\);\n\"\" 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"cd /var/www/lms/apps/api && node -e \"\"\nconst bcrypt = require\\(''bcryptjs''\\);\nconst hash = bcrypt.hashSync\\(''admin123'', 10\\);\nconsole.log\\(hash\\);\n\"\" 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"docker exec motochefe-postgres psql -U motochefe -d universidade -c \"\"UPDATE users SET password_hash = ''\\\\$2b\\\\$10\\\\$yaEoXHaDNnKjZ4eg1IpJ/O9FUAdrQ7p9Tjy0FPOFCMnLaaKs6RAy.'' WHERE email = ''admin@motochefe.com.br'';\"\" 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"curl -s -X POST http://localhost:4001/api/auth/login -H ''Content-Type: application/json'' -d ''{\"\"email\"\":\"\"admin@motochefe.com.br\"\",\"\"password\"\":\"\"admin123\"\"}'' 2>&1 | head -c 200\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"cat /var/www/lms/apps/web/.env.local 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"curl -s -o /dev/null -w ''%{http_code}'' https://universidademotochefe.com.br/uploads/settings/15a139a7-2b3b-4a82-af10-0f18407b16f2.mp4 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"cat /etc/nginx/sites-available/lms 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"chmod -R 755 /var/www/lms/apps/web/public/uploads/ && ls -la /var/www/lms/apps/web/public/uploads/settings/ 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"chown -R www-data:www-data /var/www/lms/apps/web/public/uploads/ && nginx -t && systemctl reload nginx 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"ls -la /var/www/lms/apps/web/public/uploads/settings/15a139a7-2b3b-4a82-af10-0f18407b16f2.mp4 && nginx -T 2>&1 | grep -A5 ''location /uploads''\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"curl -v -o /dev/null https://universidademotochefe.com.br/uploads/settings/15a139a7-2b3b-4a82-af10-0f18407b16f2.mp4 2>&1 | head -30\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"curl -s -o /dev/null -w ''%{http_code}'' http://127.0.0.1:3001/uploads/settings/15a139a7-2b3b-4a82-af10-0f18407b16f2.mp4 2>&1\")",
      "Bash(/opt/homebrew/bin/sshpass -e ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"cat > /tmp/nginx-fix.py << ''PYEOF''\nimport re\nwith open\\(''/etc/nginx/sites-available/lms'', ''r''\\) as f:\n    content = f.read\\(\\)\nold = ''''''    location /uploads {\n        alias /var/www/lms/apps/web/public/uploads/;\n        expires 30d;\n        add_header Cache-Control \"\"public, immutable\"\";\n    }''''''\nnew = ''''''    location /uploads/ {\n        alias /var/www/lms/apps/web/public/uploads/;\n        expires 30d;\n        add_header Cache-Control \"\"public, immutable\"\";\n        add_header Access-Control-Allow-Origin *;\n    }''''''\ncontent = content.replace\\(old, new\\)\nwith open\\(''/etc/nginx/sites-available/lms'', ''w''\\) as f:\n    f.write\\(content\\)\nprint\\(''done''\\)\nPYEOF\npython3 /tmp/nginx-fix.py && nginx -t && systemctl reload nginx 2>&1\")",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"curl -s -o /dev/null -w \\\\\"\"%{http_code}\\\\\"\" http://localhost/uploads/settings/15a139a7-2b3b-4a82-af10-0f18407b16f2.mp4\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"curl -sL -o /dev/null -w \\\\\"\"%{http_code}\\\\\"\" http://localhost/uploads/settings/15a139a7-2b3b-4a82-af10-0f18407b16f2.mp4\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"cat /etc/nginx/sites-available/lms\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"curl -sk -o /dev/null -w \\\\\"\"%{http_code}\\\\\"\" https://localhost/uploads/settings/15a139a7-2b3b-4a82-af10-0f18407b16f2.mp4\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"curl -sk -o /dev/null -w \\\\\"\"%{http_code}\\\\\"\" https://universidademotochefe.com.br/uploads/settings/15a139a7-2b3b-4a82-af10-0f18407b16f2.mp4\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "WebFetch(domain:github.com)",
      "Bash(pnpm --filter @motochefe/web dev:*)",
      "Bash(npx -y playwright screenshot:*)",
      "Bash(npx:*)",
      "Bash(pnpm --filter @motochefe/web build:*)",
      "Bash(expect -c '\nset timeout 300\nspawn rsync -avz --delete   --exclude node_modules   --exclude .next   --exclude dist   --exclude .env.local   --exclude .git   --exclude .claude   -e \"\"ssh -o StrictHostKeyChecking=no\"\"   /Volumes/RAFAEL-SSD/LMS/ root@93.127.211.241:/var/www/lms/\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nset timeout 600\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"cd /var/www/lms && pnpm install --frozen-lockfile 2>&1 | tail -5 && echo INSTALL_DONE && cd apps/web && npx next build 2>&1 | tail -10 && echo BUILD_DONE\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect \"\"BUILD_DONE\"\" timeout 600\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"chmod 755 /var/www/lms /var/www/lms/apps /var/www/lms/apps/web /var/www/lms/apps/web/public && chmod -R a+rX /var/www/lms/apps/web/public/uploads && curl -sk -o /dev/null -w \\\\\"\"%{http_code}\\\\\"\" https://universidademotochefe.com.br/uploads/settings/15a139a7-2b3b-4a82-af10-0f18407b16f2.mp4\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"pm2 logs lms-api --lines 30 --nostream\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nset timeout 300\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"cd /var/www/lms/apps/api && npx nest build 2>&1 | tail -5 && pm2 restart lms-api && sleep 3 && pm2 status && echo API_DONE\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"curl -s -o /dev/null -w \\\\\"\"%{http_code}\\\\\"\" https://universidademotochefe.com.br/api/settings\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"pm2 logs lms-api --lines 15 --nostream\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nset timeout 120\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"cd /var/www/lms && npx prisma generate --schema=apps/api/prisma/schema.prisma 2>&1 | tail -5 && cd apps/api && npx nest build 2>&1 | tail -3 && pm2 restart lms-api && sleep 5 && curl -s -o /dev/null -w \\\\\"\"%{http_code}\\\\\"\" http://localhost:4001/api/settings && echo API_OK\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"rm /var/www/lms/apps/api/.env; cat /var/www/lms/apps/api/.env.production 2>/dev/null | head -5; ls -la /var/www/lms/apps/api/.env* 2>&1\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"cat /var/www/lms/.env 2>/dev/null | head -25; echo ---; cat /var/www/lms/ecosystem.config.js 2>/dev/null | head -40\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"ln -sf /var/www/lms/.env /var/www/lms/apps/api/.env && ls -la /var/www/lms/apps/api/.env && pm2 restart lms-api && sleep 5 && curl -s -o /dev/null -w \\\\\"\"%{http_code}\\\\\"\" http://localhost:4001/api/settings\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"sed -i \\\\\"\"s|DATABASE_URL=postgresql://motochefe:motochefe123@localhost:5433/lms_app|DATABASE_URL=postgresql://motochefe:Motochefe2025Prod\\\\!@localhost:5433/universidade|\\\\\"\" /var/www/lms/.env && grep DATABASE /var/www/lms/.env\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"ls -la /var/www/lms/apps/api/.env && pm2 restart lms-api && sleep 3 && pm2 logs lms-api --lines 20 --nostream\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"curl -s -o /dev/null -w \\\\\"\"%{http_code}\\\\\"\" http://localhost:4001/api/settings\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"chmod 755 /var/www/lms /var/www/lms/apps /var/www/lms/apps/web /var/www/lms/apps/web/public && chmod -R a+rX /var/www/lms/apps/web/public/uploads && echo PERMISSIONS_FIXED\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"pm2 status\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(pnpm --filter web build:*)",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"cat /etc/nginx/sites-enabled/universidademotochefe.com.br 2>/dev/null || cat /etc/nginx/sites-enabled/default 2>/dev/null || ls /etc/nginx/sites-enabled/\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"cat /etc/nginx/sites-enabled/lms\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"sed -i \\\\\"\"s|NEXT_PUBLIC_API_URL=http://localhost:4001|NEXT_PUBLIC_API_URL=https://universidademotochefe.com.br/api|\\\\\"\" /var/www/lms/.env && grep NEXT_PUBLIC_API_URL /var/www/lms/.env\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nset timeout 300\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"cd /var/www/lms && NEXT_PUBLIC_API_URL=https://universidademotochefe.com.br/api pnpm --filter web build 2>&1 | tail -25\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"pm2 restart lms-web && sleep 3 && pm2 status\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"curl -s -X POST http://localhost:4001/api/lessons -H \\\\\"\"Content-Type: application/json\\\\\"\" -H \\\\\"\"Authorization: Bearer test\\\\\"\" -d \\\\\"\"{\\\\\\\\\\\\\"\"moduleId\\\\\\\\\\\\\"\":\\\\\\\\\\\\\"\"test\\\\\\\\\\\\\"\",\\\\\\\\\\\\\"\"title\\\\\\\\\\\\\"\":\\\\\\\\\\\\\"\"test\\\\\\\\\\\\\"\",\\\\\\\\\\\\\"\"type\\\\\\\\\\\\\"\":\\\\\\\\\\\\\"\"video\\\\\\\\\\\\\"\",\\\\\\\\\\\\\"\"order\\\\\\\\\\\\\"\":0}\\\\\"\" 2>&1\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(expect -c '\nspawn ssh -o StrictHostKeyChecking=no root@93.127.211.241 \"\"TOKEN=$\\(curl -s -X POST http://localhost:4001/api/auth/login -H \\\\\"\"Content-Type: application/json\\\\\"\" -d \\\\\"\"{\\\\\\\\\\\\\"\"email\\\\\\\\\\\\\"\":\\\\\\\\\\\\\"\"admin@motochefe.com.br\\\\\\\\\\\\\"\",\\\\\\\\\\\\\"\"password\\\\\\\\\\\\\"\":\\\\\\\\\\\\\"\"admin123\\\\\\\\\\\\\"\"}\\\\\"\" | python3 -c \\\\\"\"import sys,json; print\\(json.load\\(sys.stdin\\).get\\(\\\\\\\\\\\\\"\"accessToken\\\\\\\\\\\\\"\",\\\\\\\\\\\\\"\"\\\\\\\\\\\\\"\"\\)\\)\\\\\"\"\\) && echo TOKEN=$TOKEN && curl -s -X POST http://localhost:4001/api/lessons -H \\\\\"\"Content-Type: application/json\\\\\"\" -H \\\\\"\"Authorization: Bearer $TOKEN\\\\\"\" -d \\\\\"\"{\\\\\\\\\\\\\"\"moduleId\\\\\\\\\\\\\"\":\\\\\\\\\\\\\"\"test-uuid\\\\\\\\\\\\\"\",\\\\\\\\\\\\\"\"title\\\\\\\\\\\\\"\":\\\\\\\\\\\\\"\"Teste\\\\\\\\\\\\\"\",\\\\\\\\\\\\\"\"type\\\\\\\\\\\\\"\":\\\\\\\\\\\\\"\"video\\\\\\\\\\\\\"\",\\\\\\\\\\\\\"\"order\\\\\\\\\\\\\"\":0}\\\\\"\"\"\"\nexpect \"\"password:\"\"\nsend \"\"Motochefe2025@\\\\r\"\"\nexpect eof\n')",
      "Bash(brew list:*)",
      "Bash(/opt/homebrew/bin/sshpass -p 'Motochefe2025@' ssh -o StrictHostKeyChecking=no root@93.127.211.241 'cat /etc/nginx/sites-enabled/lms 2>/dev/null || cat /etc/nginx/sites-available/lms 2>/dev/null')",
      "Bash(/opt/homebrew/bin/sshpass -p 'Motochefe2025@' ssh -o StrictHostKeyChecking=no root@93.127.211.241 'cat > /tmp/lms-nginx-patch.sh << \"\"SCRIPT\"\"\n#!/bin/bash\n# Adicionar Permissions-Policy no site principal do LMS\nsed -i \"\"/client_max_body_size 500M;/i\\\\\\\\\n\\\\\\\\\n    # Permitir camera, microfone e compartilhamento de tela \\(para iframe Jitsi\\)\\\\\\\\\n    add_header Permissions-Policy \\\\\"\"camera=*, microphone=*, display-capture=*, autoplay=*, encrypted-media=*\\\\\"\" always;\"\" /etc/nginx/sites-available/lms\nSCRIPT\nchmod +x /tmp/lms-nginx-patch.sh && bash /tmp/lms-nginx-patch.sh && echo \"\"Patch applied\"\"')",
      "Bash(/opt/homebrew/bin/sshpass -p 'Motochefe2025@' ssh -o StrictHostKeyChecking=no root@93.127.211.241 'cd /var/www/lms/infra/jitsi && docker compose -f docker-compose.jitsi.yml logs --tail=30 jitsi-web 2>&1 | grep -i -E \"\"share|screen|desktop|disconnect|error|warn\"\" || echo \"\"No relevant logs\"\"')",
      "Bash(/opt/homebrew/bin/sshpass -p 'Motochefe2025@' ssh -o StrictHostKeyChecking=no root@93.127.211.241 '\ncd /var/www/lms\nNEXT_PUBLIC_API_URL=https://universidademotochefe.com.br/api NEXT_PUBLIC_JITSI_DOMAIN=meet.universidademotochefe.com.br pnpm --filter web build 2>&1 | tail -5\npm2 restart lms-web 2>&1 | tail -3\n')",
      "Bash(node -e \"\nconst { execSync } = require\\(''child_process''\\);\ntry {\n  execSync\\(''npx prisma generate'', { \n    stdio: ''inherit'', \n    timeout: 120000,\n    env: { ...process.env, PRISMA_GENERATE_NO_ENGINE: undefined }\n  }\\);\n} catch\\(e\\) {\n  console.error\\(''Error:'', e.message\\);\n}\n\")"
    ]
  }
}
